name: GIT MD Deployment
#Name für den workflow. Wichtig bei mehreren workflows im selben Repository um die workflows im actions-tab unterscheiden zu können.
run-name: GIT MD Deployment ${{ github.event.inputs.componentVersion }}

on:
  workflow_dispatch:
    inputs:
      componentVersion:
        description: 'Die Version der Komponente'
        required: true
      actionsRepositoryBranch:
        description: Zu benutzender Branch des Repositories mcbscore-github-actions
        required: false
        default: main
      deployForKubernetes:
        description: soll für Kubernetes-Zugriff deployt werden?
        type: string
        required: false
        default: "false"

jobs:
  deployment:
    uses: ./.github/workflows/deployment.yml
    secrets: inherit
    with:
      componentVersion: ${{ github.event.inputs.componentVersion }}
      stage: git
      company: md
      deploymentTarget: apigw-g1.mobilcom.de
      additionalDeploymentTarget: apigw-g2.mobilcom.de
      bambiNotification: true
      actionsRepositoryBranch: ${{ github.event.inputs.actionsRepositoryBranch }}
      deployForKubernetes: ${{ github.event.inputs.deployForKubernetes }}