name: Initialize Workflow
description: Generischer Workflow, der zur Initialisierung aller Workflows verwendet werden kann

inputs:
  awsAccessKeyId:
    description: AWS Access Key Id
  awsSecretAccessKey:
    description: AWS Secret Access Key
  awsParameterPairs:
    description: auszulesende AWS Parameter
    default: |
      /github/secrets/mcbs_token = TOKEN
  installJava:
    description: JDK installieren?
    type: boolean
    default: false

runs:
  using: "composite"
  steps:
    - id: read-aws-secrets
      name: Read AWS Secrets
      uses: ./.github/actions/read-aws-secrets
      with:
        awsAccessKeyId: ${{ inputs.awsAccessKeyId }}
        awsSecretAccessKey: ${{ inputs.awsSecretAccessKey }}
        awsParameterPairs: ${{ inputs.awsParameterPairs }}

    # Workflow Properties einlesen
    - name: Read workflow.properties
      shell: bash
      run: |
        # Einlesen beider Dateien, da build.properties in workflow.properties umbenannt werden sollte. Somit bleibt es
        # abwÃ¤rtskompatibel
        if [ -f ./.github/workflow.properties ]; then cat ./.github/workflow.properties >> $GITHUB_ENV; fi
        if [ -f ./.github/build.properties ]; then cat ./.github/build.properties >> $GITHUB_ENV; fi

    # JAVA installieren
    - name: Set up JDK
      if: ${{ inputs.installJava }}
      uses: actions/setup-java@v3
      with:
        distribution: zulu
        java-version: ${{ env.JAVA_VERSION }}

